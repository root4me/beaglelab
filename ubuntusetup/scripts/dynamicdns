#!/bin/bash

# Functions to remove apache and install nginx
# Command line argument : install

source textformatting

function installDdClient() {
  echo $cyanfg "Need to run apt-get upgrade" $resetall
  sudo apt-get update && sudo apt-get dist-upgrade
  echo $cyanfg "Installing ddclient" $resetall
  sudo apt-get install ddclient
}

function configureDdClientForNamecheap() {

  read -p $greenfg$bold"Enter login (This will be the domain name) : "$resetall login
  read -p $greenfg$bold"Enter pwd (Generated at namecheap. Reffer to /etc/ddclient.conf if you tried it out locally) : "$resetall pwd

  echo "# Configuration file for ddclient generated by debconf
#
# /etc/ddclient.conf
use=web, web=dynamicdns.park-your-domain.com/getip
protocol=namecheap
server=dynamicdns.park-your-domain.com
login=$login
password=$pwd
@
" | sudo tee /etc/ddclient.conf > /dev/null

  sudo service ddclient restart
}


if [[ $(uppercase $1) == "INSTALL" ]]; then
  installDdClient
fi

if [[ $(uppercase $1) == "UNINSTALL" ]]; then
  sudo apt-get purge --auto-remove ddclient
fi

if [[ $(uppercase $1) == "CONFIGURE" ]]; then
  configureDdClientForNamecheap
fi
